<div class="flex flex-col justify-center items-center m-2">
  <h1>{{ pageHeading }}</h1>
  <div class="flex justify-evenly p-2 w-full">
    <div class="flex items-center flex-col w-full px-4">
      <h2>{{ "Address Information" }}</h2>
      <button
        mat-raised-button
        class="m-2 w-full"
        (click)="toggleNewAddressForm()"
      >
        {{ toggleAddressBtn }}
      </button>
      <div class="flex items-center w-full mt-2">
        <div *ngIf="!showNewAddressForm" class="flex flex-col w-full">
          <h2>Or select from a saved address</h2>
          <mat-radio-group
            aria-labelledby="example-radio-group-label"
            class="example-radio-group flex flex-col w-full"
            [(ngModel)]="selectedOption"
            (change)="onChangeAddress($event)"
          >
            <mat-radio-button
              class="flex items-center justify-center w-full example-radio-button py-2"
              *ngFor="let address of addresses; index as i"
              [value]="address.id"
            >
              <div class="flex flex-col items-center flex-wrap w-full">
                {{ address.house }}, {{ address.street }}, {{ address.area }},
                {{ address.city }}, {{ address.state }},
                {{ address.pincode }}
              </div>
            </mat-radio-button>
          </mat-radio-group>
        </div>

        <div
          *ngIf="showNewAddressForm"
          class="flex flex-col justify-between items-center w-full"
        >
          <form class="flex flex-col w-full" [formGroup]="addressForm">
            <mat-form-field appearance="outline">
              <mat-label>House</mat-label>
              <input matInput formControlName="house" placeholder="House" />
              <mat-error>House field cannot be blank.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Street</mat-label>
              <input matInput formControlName="street" placeholder="Street" />
              <mat-error>Street field cannot be blank.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Area</mat-label>
              <input matInput formControlName="area" placeholder="Area" />
              <mat-error>Area field cannot be blank.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <input matInput formControlName="city" placeholder="City" />
              <mat-error>City field cannot be blank.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>State</mat-label>
              <input matInput formControlName="state" placeholder="State" />
              <mat-error>State field cannot be blank.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Pincode</mat-label>
              <input matInput formControlName="pincode" />
              <mat-error>Pincode field cannot be blank.</mat-error>
            </mat-form-field>
            <button
              mat-raised-button
              type="submit"
              color="primary"
              (click)="onSaveAddress()"
              [disabled]="!addressForm.valid"
            >
              {{ saveAddressBtn }}
            </button>
          </form>
        </div>
      </div>
    </div>
    <div class="flex flex-col items-center px-4 w-full">
      <h2>{{ "Payment Information" }}</h2>
      <form class="flex flex-col w-full" [formGroup]="paymentForm">
        <mat-form-field appearance="outline">
          <mat-label>Cardholder Name</mat-label>
          <input
            matInput
            formControlName="cardHolderName"
            placeholder="Cardholder Name"
            [(ngModel)]="selectedPayment.cardHolderName"
          />
          <mat-error>Cardholder Name field cannot be blank.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Card Number</mat-label>
          <input
            matInput
            formControlName="cardNumber"
            placeholder="Card Number"
            [(ngModel)]="selectedPayment.cardNumber"
          />
          <mat-error>Card Number field cannot be blank.</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Card Type</mat-label>
          <input
            matInput
            formControlName="cardType"
            placeholder="Card Type"
            [(ngModel)]="selectedPayment.cardType"
          />
          <mat-error>Card Type field cannot be blank.</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>CVV</mat-label>
          <input
            matInput
            formControlName="cardCVV"
            placeholder="CVV"
            [(ngModel)]="selectedPayment.cardCVV"
          />
          <mat-error>Card Expiry field cannot be blank.</mat-error>
        </mat-form-field>
      </form>
      isAddressValid: {{ addressForm.valid }}, isPaymentValid:
      {{ paymentForm.valid }}
      <button
        mat-raised-button
        class="w-full"
        color="primary"
        (click)="onConfirmDetails()"
        [disabled]="paymentForm.invalid || !selectedAddress"
      >
        {{ confirmOrderDetailsBtn }}
      </button>
    </div>
  </div>
</div>
